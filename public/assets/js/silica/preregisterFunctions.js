class _register{constructor(e,t,n,i,r,a,s,o,d,l,E,R,c,u="",m="",S=-1,g="",I=-1,T="",p="",_="",C=-1,P="",y=1900,v="",N=1,h=-1,f=-1,G="",b="",B="",w="",M="",x="",A="",O="",L="",W="",H="",U="",q=0,D=-1,F=10,Q=-1,k=-1,J=-1,X=-1,V=1,Y="",z="",j="",K="",Z="",$="",ee="{}",te=-1,ne=1){this.companyId=e,this.persontype=t,this.registerId=n,this.registerName=i,this.registerdoc=r,this.registerdocnumber=a,this.registernationality=s,this.fathername=o,this.mothername=d,this.registerTaxId=l,this.registerType=E,this.businessid=R,this.profission=c,this.personname=u,this.personfunction=m,this.identificationdoc=S,this.identificationnumber=g,this.personnationality=I,this.personphone1=T,this.personphone2=p,this.personemail=_,this.academicdegree=C,this.schoolname=P,this.formationyear=y,this.worktitle=v,this.billingCountry=N,this.billingProvince=h,this.billingMunicipality=f,this.billingCity=G,this.billingDistrict=b,this.billingComuna=B,this.billingNeiborhood=w,this.billingStreetName=M,this.billingBuildNumber=x,this.billingPostalCode=A,this.billingPhone1=O,this.billingPhone2=L,this.billingPhone3=W,this.billingEmail=H,this.billingWebsite=U,this.dependence=q,this.entryuser=D,this.request=F,this.coordinatorUser=Q,this.managerUser=k,this.directorGeneralUser=J,this.administratorUser=X,this.partinership=V,this.attachdocument1=Y,this.attachdocument2=z,this.attachdocument3=j,this.attachdocument4=K,this.attachdocument5=Z,this.attachdocument6=$,this.profitionalFormation=ee,this.customerid=te,this.laststage=ne}}var PRE_REGISTER_PERSON_TYPE=2,PRE_REGISTER_MAX_STAGE=5,PRE_REGISTER_REGISTER_ACTUAL_STAGE=1,PRE_REGISTER_REGISTER_NEW=new _register,PRE_REGISTER_REGISTER_SERVICES=[],PRE_REGISTER_REGISTER_QUESTIONS=[],PRE_REGISTER_REGISTER_INVESTMENT=[],PRE_REGISTER_REGISTER_INVESTMENT_ASSIGNED=[],PRE_REGISTER_REGISTER_PROFITIONAL_FORMATION=[];function preRegisterBusinessOnLoad(e){showNotification(),checkUserStatusAfterExecute(function(){preRegisterBusinessList("")})}function preRegisterBusinessList(e){showNotification();var t=new XMLHttpRequest;t.open("POST","_aqconections/preregister_crud.php",!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=JSON.parse(this.responseText);let n=document.getElementById("tblPreCadNegMainTable");n.innerHTML="";var t=0;e.forEach(e=>(function(e){t+=1;let i=JSON.parse(e),r=n.insertRow(-1);r.setAttribute("class","borderGray");let a=r.insertCell(0);a.setAttribute("class","colRowNumber"),a.innerHTML=t;let s=r.insertCell(1);s.setAttribute("class","colProductId"),s.innerHTML=i.id,r.insertCell(2).innerHTML=i.business,r.insertCell(3).innerHTML=i.servicetitle;let o=r.insertCell(4);var d=document.createElement("button");d.setAttribute("class","labelEdit"),d.type="button",d.name=i.id,d.onclick=function(){preRegisterEditBisiness(d.name)},o.appendChild(d),o.style.textAlign="center",o.style.width="60px";let l=r.insertCell(5);var E=document.createElement("button");E.setAttribute("class","labelDelete"),E.type="button",E.value=LABEL_DELETE,E.name=i.id,E.onclick=function(){preRegisterBusinessDelete(E.name)},l.appendChild(E),l.style.textAlign="center",l.style.width="60px"})(e)),hideNotification()}},t.send("action=getPreRegisterBusinessList")}function preRegisterBusinessNew(e){document.getElementById("txtPreCadNegId").value="Novo negócio",document.getElementById("txtPreCadNegBusiness").value="",document.getElementById("txtPreCadNegServiceTitle").value="Serviços",document.getElementById("txtPreCadNegBusiness").focus}function preRegisterBusinessSave(e){var t=document.getElementById("txtPreCadNegId").value,n=reviewString(document.getElementById("txtPreCadNegBusiness")),i=reviewString(document.getElementById("txtPreCadNegServiceTitle"));if(""==n)return showNotification("Campo obrigatório não preenchido.",0),document.getElementById("txtPreCadNegBusiness").focus,!1;showNotification();var r=new XMLHttpRequest,a="action=savePreRegisterBusiness&businessId="+t+"&business="+n+"&serviceTitle="+i;r.open("POST","_aqconections/preregister_crud.php",!0),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.onreadystatechange=function(){4==this.readyState&&200==this.status&&(1==r.responseText?(showNotification("Negócio actualizado com sucesso.",1),preRegisterBusinessList(""),preRegisterBusinessNew("")):hideNotification())},r.send(a)}function preRegisterEditBisiness(e){var t=new XMLHttpRequest,n="action=preRegisterEditBusiness&businessId="+e;t.open("POST","_aqconections/preregister_crud.php",!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.onreadystatechange=function(){if(4==this.readyState&&200==this.status){JSON.parse(this.responseText).forEach(e=>(function(e){var t=JSON.parse(e);document.getElementById("txtPreCadNegId").value=t.id,document.getElementById("txtPreCadNegBusiness").value=t.business,document.getElementById("txtPreCadNegServiceTitle").value=t.servicetitle,document.getElementById("txtPreCadNegBusiness").focus})(e))}},t.send(n)}function preRegisterBusinessDelete(e){if(confirm("Tem a certeza que deseja eliminar este negócio?")){var t=new XMLHttpRequest,n="action=deletePreRegisterBusiness&businessId="+e;t.open("POST","_aqconections/preregister_crud.php",!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.onreadystatechange=function(){4==this.readyState&&200==this.status&&(showNotification(this.responseText,1),preRegisterBusinessList(""))},t.send(n)}}function preResisterServiceOnLoad(e){showNotification(),checkUserStatusAfterExecute(function(){fillSelectPreRegisterProduct(SYSTEM_USER_STATUS.companyId,"selPreCadInveProduct"),hideNotification()})}function fillSelectPreRegisterBusiness(e,t=1,n=2){const i=document.getElementById(e);if(i.innerHTML="",-1==t){var r=document.createElement("option");r.value="-1",r.setAttribute("class","selectPlaceHolder"),r.innerHTML="Seleccionar",i.appendChild(r)}var a=new XMLHttpRequest,s="action=getPreRegisterBusinessList&personType="+n;a.open("POST","_aqconections/preregister_crud.php",!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.onreadystatechange=function(){if(4==this.readyState&&200==this.status){JSON.parse(this.responseText).forEach(e=>(function(e){let t=JSON.parse(e);var n=document.createElement("option");n.value=t.id,n.innerHTML=t.business,i.appendChild(n)})(e))}},a.send(s)}function fillSelectPreRegisterProduct(e,t,n=1){const i=document.getElementById(t);if(!validateUserControl(i))return!1;if(i.innerHTML="",-1==n){var r=document.createElement("option");r.value="-1",r.setAttribute("class","selectPlaceHolder"),r.innerHTML="Seleccionar",i.appendChild(r)}var a=new XMLHttpRequest,s="action=getProductList&companyId="+e;a.open("POST","_aqconections/preregister_crud.php",!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.onreadystatechange=function(){if(4==this.readyState&&200==this.status){JSON.parse(this.responseText).forEach(e=>(function(e){let t=JSON.parse(e);var n=document.createElement("option");n.value=t.id,n.innerHTML=t.productdescription+" ("+formatNumber(t.PVP)+" KZ)",i.appendChild(n)})(e))}},a.send(s)}function preRegisterServiceList(e){var t=document.getElementById("selPreCadServBusiness").value;showNotification();var n=new XMLHttpRequest,i="action=getPreRegisterServiceList&businessId="+t;n.open("POST","_aqconections/preregister_crud.php",!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=JSON.parse(this.responseText);let i=document.getElementById("tblPreCadServMainTable");i.innerHTML="";var n=0;e.forEach(e=>(function(e){n+=1;let r=JSON.parse(e),a=i.insertRow(-1);a.setAttribute("class","borderGray");let s=a.insertCell(0);s.setAttribute("class","colRowNumber"),s.innerHTML=n;let o=a.insertCell(1);o.setAttribute("class","colProductId"),o.innerHTML=r.id,a.insertCell(2).innerHTML=r.service;let d=a.insertCell(3);var l=document.createElement("button");l.setAttribute("class","labelEdit"),l.type="button",l.name=r.id,l.onclick=function(){preRegisterEditService(t,l.name)},d.appendChild(l),d.style.textAlign="center",d.style.width="60px";let E=a.insertCell(4);var R=document.createElement("button");R.setAttribute("class","labelDelete"),R.type="button",R.name=r.id,R.onclick=function(){preRegisterServiceDelete(R.name)},E.appendChild(R),E.style.textAlign="center",E.style.width="60px"})(e)),hideNotification()}},n.send(i)}function preRegisterServiceNew(e){document.getElementById("txtPreCadServId").value="Novo serviço",document.getElementById("txtPreCadServService").value="",document.getElementById("txtPreCadServService").focus}function preRegisterServiceSave(e){var t=document.getElementById("selPreCadServBusiness").value,n=document.getElementById("txtPreCadServId").value,i=document.getElementById("txtPreCadServService").value;if(""==i)return showNotification("Campo obrigatório não preenchido.",0),document.getElementById("txtPreCadServService").focus,!1;showNotification();var r=new XMLHttpRequest,a="action=savePreRegisterService&businessId="+t+"&serviceId="+n+"&service="+i;r.open("POST","_aqconections/preregister_crud.php",!0),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.onreadystatechange=function(){4==this.readyState&&200==this.status&&(1==r.responseText?(showNotification("Serviço actualizado com sucesso.",1),preRegisterServiceList(t),preRegisterServiceNew("")):hideNotification())},r.send(a)}function preRegisterEditService(e,t){var n=new XMLHttpRequest,i="action=preRegisterEditService&businessId="+e+"&serviceId="+t;n.open("POST","_aqconections/preregister_crud.php",!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.onreadystatechange=function(){if(4==this.readyState&&200==this.status){JSON.parse(this.responseText).forEach(e=>(function(e){var t=JSON.parse(e);document.getElementById("txtPreCadServId").value=t.id,document.getElementById("txtPreCadServService").value=t.service,document.getElementById("txtPreCadServService").focus})(e))}},n.send(i)}function preRegisterServiceDelete(e){if(confirm("Tem a certeza que deseja eliminar este serviço?")){showNotification();var t=new XMLHttpRequest,n="action=deletePreRegisterService&serviceId="+e;t.open("POST","_aqconections/preregister_crud.php",!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.onreadystatechange=function(){4==this.readyState&&200==this.status&&(1==this.responseText?(showNotification("Serviço eliminado com sucesso.",1),preRegisterServiceList("")):hideNotification())},t.send(n)}}function preRegisterQuestionNew(e){document.getElementById("txtPreCadQueId").value="Nova pergunta",document.getElementById("txtPreCadQueQuestion").value="",document.getElementById("txtPreCadQueQuestion").focus}function preRegisterQuestionList(e){var t=document.getElementById("selPreCadServBusiness").value;showNotification();var n=new XMLHttpRequest,i="action=getPreRegisterQuestionList&businessId="+t;n.open("POST","_aqconections/preregister_crud.php",!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=JSON.parse(this.responseText);let i=document.getElementById("tblPreCadQueMainTable");i.innerHTML="";var n=0;e.forEach(e=>(function(e){n+=1;let r=JSON.parse(e),a=i.insertRow(-1);a.setAttribute("class","borderGray");let s=a.insertCell(0);s.setAttribute("class","colRowNumber"),s.innerHTML=n;let o=a.insertCell(1);o.setAttribute("class","colProductId"),o.innerHTML=r.id,a.insertCell(2).innerHTML=r.question;let d=a.insertCell(3);var l=document.createElement("button");l.setAttribute("class","labelEdit"),l.type="button",l.name=r.id,l.onclick=function(){preRegisterQuestionEdit(t,l.name)},d.appendChild(l),d.style.textAlign="center",d.style.width="60px";let E=a.insertCell(4);var R=document.createElement("button");R.setAttribute("class","labelDelete"),R.type="button",R.name=r.id,R.onclick=function(){preRegisterQuestionDelete(R.name)},E.appendChild(R),E.style.textAlign="center",E.style.width="60px"})(e)),hideNotification()}},n.send(i)}function preRegisterQuestionSave(e){var t=document.getElementById("selPreCadServBusiness").value,n=document.getElementById("txtPreCadQueId").value,i=document.getElementById("txtPreCadQueQuestion").value;if(""==i)return showNotification("Campo obrigatório não preenchido.",0),document.getElementById("txtPreCadQueQuestion").focus,!1;showNotification();var r=new XMLHttpRequest,a="action=savePreRegisterQuestion&businessId="+t+"&questionId="+n+"&question="+i;r.open("POST","_aqconections/preregister_crud.php",!0),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.onreadystatechange=function(){4==this.readyState&&200==this.status&&(1==r.responseText?(showNotification("Questionário actualizado com sucesso.",1),preRegisterQuestionList(t),preRegisterQuestionNew("")):hideNotification())},r.send(a)}function preRegisterQuestionEdit(e,t){var n=new XMLHttpRequest,i="action=preRegisterQuestionEdit&businessId="+e+"&questionId="+t;n.open("POST","_aqconections/preregister_crud.php",!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.onreadystatechange=function(){if(4==this.readyState&&200==this.status){JSON.parse(this.responseText).forEach(e=>(function(e){var t=JSON.parse(e);document.getElementById("txtPreCadQueId").value=t.id,document.getElementById("txtPreCadQueQuestion").value=t.question,document.getElementById("txtPreCadQueQuestion").focus})(e))}},n.send(i)}function preRegisterQuestionDelete(e){if(confirm("Tem a certeza que deseja eliminar esta pergunta?")){showNotification();var t=new XMLHttpRequest,n="action=deletePreRegisterQuestion&questionId="+e;t.open("POST","_aqconections/preregister_crud.php",!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.onreadystatechange=function(){4==this.readyState&&200==this.status&&(1==this.responseText?(showNotification("Pergunta eliminada com sucesso.",1),preRegisterQuestionList("")):hideNotification())},t.send(n)}}function preRegisterInvestimentList(e){SYSTEM_USER_STATUS.companyId;var t=document.getElementById("selPreCadServBusiness").value;showNotification();var n=new XMLHttpRequest,i="action=getPreRegisterInvestmentList&businessId="+t;n.open("POST","_aqconections/preregister_crud.php",!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=JSON.parse(this.responseText);let n=document.getElementById("tblPreCadInveMainTable");n.innerHTML="";var t=0;e.forEach(e=>(function(e){t+=1;let i=JSON.parse(e),r=n.insertRow(-1);r.setAttribute("class","borderGray");let a=r.insertCell(0);a.setAttribute("class","colRowNumber"),a.innerHTML=t;let s=r.insertCell(1);s.setAttribute("class","colProductId"),s.innerHTML=i.id,r.insertCell(2).innerHTML=i.productdescription;let o=r.insertCell(3);o.style.textAlign="right",o.style.paddingRight="10px",o.innerHTML=formatNumber(i.PVP);let d=r.insertCell(4);var l=document.createElement("button");l.setAttribute("class","labelEdit"),l.type="button",l.name=i.id,l.onclick=function(){},d.appendChild(l),d.style.textAlign="center",d.style.width="60px";let E=r.insertCell(5);var R=document.createElement("button");R.setAttribute("class","labelDelete"),R.type="button",R.name=i.id,R.onclick=function(){preRegisterInvestmentDelete(R.name)},E.appendChild(R),E.style.textAlign="center",E.style.width="60px"})(e)),hideNotification()}},n.send(i)}function preRegisterInvestmentNew(e){document.getElementById("txtPreCadInveId").value="Novo investimento",document.getElementById("selPreCadInveProduct").focus}function preRegisterInvetmentSave(e){var t=document.getElementById("selPreCadServBusiness").value,n=document.getElementById("txtPreCadInveId").value,i=document.getElementById("selPreCadInveProduct").value;if(isNaN(i))return showNotification("O valor do investimento dever numérico.",0),document.getElementById("selPreCadInveProduct").focus,!1;showNotification();var r=new XMLHttpRequest,a="action=savePreRegisterInvestment&businessId="+t+"&investId="+n+"&productId="+i;r.open("POST","_aqconections/preregister_crud.php",!0),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.onreadystatechange=function(){4==this.readyState&&200==this.status&&(1==r.responseText?(showNotification("Investimento actualizado com sucesso.",1),preRegisterInvestimentList(t),preRegisterInvestmentNew("")):hideNotification())},r.send(a)}function preRegisterInvestmentEdit(e,t){var n=new XMLHttpRequest,i="action=preRegisterInvestmentEdit&businessId="+e+"&investId="+t;n.open("POST","_aqconections/preregister_crud.php",!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.onreadystatechange=function(){if(4==this.readyState&&200==this.status){JSON.parse(this.responseText).forEach(e=>(function(e){var t=JSON.parse(e);document.getElementById("txtPreCadInveId").value=t.id,document.getElementById("txtPreCadInveDescription").value=t.investment,document.getElementById("numPreCadInveAmount").value=t.amount,document.getElementById("txtPreCadInveDescription").focus})(e))}},n.send(i)}function preRegisterInvestmentDelete(e){if(confirm("Tem a certeza que deseja eliminar esta pergunta?")){showNotification();var t=new XMLHttpRequest,n="action=deletePreRegisterInvestment&investId="+e;t.open("POST","_aqconections/preregister_crud.php",!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.onreadystatechange=function(){4==this.readyState&&200==this.status&&(1==this.responseText?(showNotification("Investimento eliminado com sucesso.",1),preRegisterInvestimentList("")):hideNotification())},t.send(n)}}function preRegisterRegisterOnLoad(e,t,n,i="1024000",r="REGISTER"){try{showNotification(),setSystemUserStatus(""),checkUserStatusAfterExecute(function(){var a=SYSTEM_USER_STATUS.companyId,s=SYSTEM_USER_STATUS.userId,o=SYSTEM_USER_STATUS.coordinatorUser,d=SYSTEM_USER_STATUS.managerUser,l=SYSTEM_USER_STATUS.directorGeneralUser,E=SYSTEM_USER_STATUS.administratorUser,R=SYSTEM_USER_STATUS.partnershipUser;PRE_REGISTER_PERSON_TYPE=e,-1==o&&(o=s),-1==d&&(d=s),-1==l&&(l=s),-1==E&&(E=s),preRegisterRegisterPersonTypeChange(""),PRE_REGISTER_REGISTER_ACTUAL_STAGE=1,(PRE_REGISTER_REGISTER_NEW=new _register).companyId=a,PRE_REGISTER_REGISTER_NEW.persontype=PRE_REGISTER_PERSON_TYPE,PRE_REGISTER_REGISTER_NEW.request=t,PRE_REGISTER_REGISTER_NEW.registerId=n,PRE_REGISTER_REGISTER_NEW.entryuser=s,PRE_REGISTER_REGISTER_NEW.coordinatorUser=o,PRE_REGISTER_REGISTER_NEW.managerUser=d,PRE_REGISTER_REGISTER_NEW.directorGeneralUser=l,PRE_REGISTER_REGISTER_NEW.administratorUser=E,PRE_REGISTER_REGISTER_NEW.partinership=R;var c=document.getElementById("divPreCadCadMainButtons");if(c.innerHTML="",-1==n){var u=document.createElement("button");u.setAttribute("class","mainButton labelNew"),u.type="button",u.innerHTML="Novo cadastro",u.onclick=function(){window.location.reload()},c.appendChild(u);var m=document.createElement("button");m.setAttribute("class","mainButton"),m.type="button",m.innerHTML="Rever cadastro",m.onclick=function(){},c.appendChild(m)}setCustomerType(""),selectCountryChange("selPreCadCadBillCountry","selPreCadCadBillProvince","selPreCadCadBillMunicipality","lbPreCadCadBillCity"),fillSelectCustomerType("selPreCadCadRegisterType"),fillSelectCountry("selPreCadCadBillCountry"),fillSelectProvince("selPreCadCadBillProvince",-1),fillSelectCountry("selPreCadCadPersonNationality",-1),fillSelectCountry("selPreCadCadRegisterNationality",-1);let S=document.getElementById("selPreCadCadBillProvince");S.onclick=function(){fillSelectMunicipality("selPreCadCadBillMunicipality",S.value,-1)},preRegisterRegisterSetUploadFile(i,r),preRegisterRegisterGetInfo(a,n),preRegisterRegisterSetVisibility(PRE_REGISTER_REGISTER_ACTUAL_STAGE),autocomplete(document.getElementById("txtPreCadCadProfition"),PROFITION_LIST),hideNotification()})}catch(e){showNotification(e.message,0)}}function preRegisterRegisterSetUploadFile(e,t){var n={0:"PDF",1:"JPEG",2:"JPG",3:"PNG"};n=JSON.stringify(n);try{for(var i=1;i<=6;i++){let r=document.getElementById("divEmpCadUploadDocs"+i);r.ondragover=r.ondragenter=function(e){e.stopPropagation(),e.preventDefault()};const a=i;r.ondrop=function(i){i.stopPropagation(),i.preventDefault();let r=i.dataTransfer.files;for(var s=0;s<r.length;s++)sendFile(r[s],n,e,t,"pEmpCadUploadMsg"+a,"lbPreCadCadAttachSourceFileName"+a,"lbPreCadCadAttachTargetFileName"+a,"")}}}catch(e){alert(e.message)}}function preRegisterRegisterSetVisibility(e=1){for(var t=1;t<=PRE_REGISTER_MAX_STAGE;t++){let r=document.getElementById("spanPreCadCadStage"+t);if(1==t){(i=document.createElement("label")).setAttribute("class","labelStage");var n=1==PRE_REGISTER_PERSON_TYPE?"Sobre a pessoa":"Sobre a instituição";i.innerHTML="1. ".bold()+n,r.innerHTML="",r.appendChild(i)}if(2==t){var i;(i=document.createElement("label")).setAttribute("class","labelStage");n=1==PRE_REGISTER_PERSON_TYPE?"Dados académicos e profissionais":"Sobre o responsável da instituição";i.innerHTML="2. ".bold()+n,r.innerHTML="",r.appendChild(i)}t<e&&(r.style.backgroundColor="var(--stageColor)",r.style.border="1px solid var(--stageColor)",r.style.color="white"),t==e&&(r.style.backgroundColor="white",r.style.border="3px solid var(--stageColor)",r.style.color="black"),t>e&&(r.style.backgroundColor="white",r.style.border="1px solid var(--stageColor)",r.style.color="black");let a=document.getElementById("divPreCadCadStage"+t);a.style.display=t!=e?"none":"block"}document.getElementById("myBar").style.width=Number(Number(e)*(100/Number(PRE_REGISTER_MAX_STAGE)))+"%";var r=document.getElementById("btPreCadCadBack"),a=document.getElementById("btPreCadCadNext"),s=document.getElementById("btPreCadCadFinish"),o=document.getElementById("btPreCadCadCancel");r.style.display=1==e?"none":"inline",e==PRE_REGISTER_MAX_STAGE?(o.style.display="none",a.style.display="none",s.style.display="inline"):(o.style.display="inline",a.style.display="inline",s.style.display="none")}function preRegisterRegisterGoNextStage(e){var t=!1,n="";if(1==PRE_REGISTER_REGISTER_ACTUAL_STAGE){if(PRE_REGISTER_REGISTER_NEW.registerId=document.getElementById("lbPreCadCadRegisterId").innerHTML,PRE_REGISTER_REGISTER_NEW.registerName=reviewString(document.getElementById("txtPreCadCadRegisterName").value),""==PRE_REGISTER_REGISTER_NEW.registerName&&(t=!0,n+="Deve indicar o nome. <br>"),PRE_REGISTER_REGISTER_NEW.registerdoc=document.getElementById("selPreCadCadRegisterDoc").value,PRE_REGISTER_REGISTER_NEW.registerdocnumber=reviewString(document.getElementById("txtPreCadCadRegisterIdentificationNumber").value),PRE_REGISTER_REGISTER_NEW.fathername=reviewString(document.getElementById("txtPreCadCadFatherName").value),PRE_REGISTER_REGISTER_NEW.mothername=reviewString(document.getElementById("txtPreCadCadMotherName").value),PRE_REGISTER_REGISTER_NEW.registernationality=document.getElementById("selPreCadCadRegisterNationality").value,PRE_REGISTER_REGISTER_NEW.registerTaxId=reviewString(document.getElementById("txtPreCadCadRegisterTaxId").value),""==PRE_REGISTER_REGISTER_NEW.registerTaxId&&(t=!0,n+="Deve indicar o NIF. <br>"),PRE_REGISTER_REGISTER_NEW.profission=reviewString(document.getElementById("txtPreCadCadProfition").value),PRE_REGISTER_REGISTER_NEW.businessid=document.getElementById("selPreCadCadBusiness").value,1==PRE_REGISTER_PERSON_TYPE&&""==PRE_REGISTER_REGISTER_NEW.profission&&(t=!0,n+="Deve indicar a profissão.. <br>"),Number(PRE_REGISTER_REGISTER_NEW.businessid)<1&&(t=!0,n+="Deve indicar a linha de negócio da instituição. <br>"),PRE_REGISTER_REGISTER_NEW.billingCountry=document.getElementById("selPreCadCadBillCountry").value,PRE_REGISTER_REGISTER_NEW.billingProvince=document.getElementById("selPreCadCadBillProvince").value,PRE_REGISTER_REGISTER_NEW.billingMunicipality=document.getElementById("selPreCadCadBillMunicipality").value,1==PRE_REGISTER_REGISTER_NEW.billingCountry&&(Number(PRE_REGISTER_REGISTER_NEW.billingProvince)<1&&(t=!0,n+="Deve indicar a província. <br>"),Number(PRE_REGISTER_REGISTER_NEW.billingMunicipality)<1&&(t=!0,n+="Deve indicar o município. <br>")),PRE_REGISTER_REGISTER_NEW.billingCity=reviewString(document.getElementById("txtPreCadCadBillCity").value),PRE_REGISTER_REGISTER_NEW.billingDistrict=reviewString(document.getElementById("txtPreCadCadBillDistrict").value),PRE_REGISTER_REGISTER_NEW.billingComuna=reviewString(document.getElementById("txtPreCadCadBillComuna").value),PRE_REGISTER_REGISTER_NEW.billingNeiborhood=reviewString(document.getElementById("txtPreCadCadBillNeiborhood").value),PRE_REGISTER_REGISTER_NEW.billingStreetName=reviewString(document.getElementById("txtPreCadCadBillStreet").value),PRE_REGISTER_REGISTER_NEW.billingBuildNumber=reviewString(document.getElementById("txtPreCadCadBillBuidNumber").value),PRE_REGISTER_REGISTER_NEW.billingPostalCode=reviewString(document.getElementById("txtPreCadCadBillPostal").value),PRE_REGISTER_REGISTER_NEW.billingPhone1=reviewString(document.getElementById("txtPreCadCadTelef1").value),PRE_REGISTER_REGISTER_NEW.billingPhone2=reviewString(document.getElementById("txtPreCadCadTelef2").value),PRE_REGISTER_REGISTER_NEW.billingPhone3=reviewString(document.getElementById("txtPreCadCadTelef3").value),""==PRE_REGISTER_REGISTER_NEW.billingPhone1&&""==PRE_REGISTER_REGISTER_NEW.billingPhone2&&""==PRE_REGISTER_REGISTER_NEW.billingPhone3&&(t=!0,n+="Deve indicar pelo menos um contacto telefónico. <br>"),PRE_REGISTER_REGISTER_NEW.billingEmail=reviewEmail(document.getElementById("txtPreCadCadEmail").value),""!=PRE_REGISTER_REGISTER_NEW.billingEmail&&(validateEmail(PRE_REGISTER_REGISTER_NEW.billingEmail)||(t=!0,n+="Deve e-mail fora do formato. <br>")),PRE_REGISTER_REGISTER_NEW.billingWebsite=document.getElementById("txtPreCadCadWebsite").value,PRE_REGISTER_REGISTER_NEW.dependence=document.getElementById("numPreCadCadDependenceNumber").value,1==t)return alert(n),!1;showNotification(),PRE_REGISTER_REGISTER_NEW.laststage=1;var i=new XMLHttpRequest,r="action=savePreRegisterRegister&registerInfo="+JSON.stringify(PRE_REGISTER_REGISTER_NEW)+"&sender=REGISTER",a="_aqconections/preregister_crud.php";i.open("POST",a,!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=JSON.parse(i.responseText);return 0==e.status?(showNotification(e.msg,0),!1):(PRE_REGISTER_REGISTER_NEW.registerId=e.registerId,PRE_REGISTER_REGISTER_NEW.registerName=e.registerName,document.getElementById("lbPreCadCadRegisterId").innerHTML=e.registerId,document.getElementById("lbPreCadCadRegisterName").innerHTML=" Em nome de: "+e.registerName.toString().bold(),l(""),!0)}},i.send(r)}if(2==PRE_REGISTER_REGISTER_ACTUAL_STAGE){PRE_REGISTER_REGISTER_NEW.personname=reviewString(document.getElementById("txtPreCadCadPersonName").value),2==PRE_REGISTER_PERSON_TYPE&&""==PRE_REGISTER_REGISTER_NEW.personname&&(t=!0,n+="Deve indicar o nome do responsável. <br>"),PRE_REGISTER_REGISTER_NEW.personfunction=reviewString(document.getElementById("txtPreCadCadPersonFunction").value),PRE_REGISTER_REGISTER_NEW.identificationdoc=document.getElementById("selPreCadCadIdentificationDoc").value,PRE_REGISTER_REGISTER_NEW.identificationnumber=document.getElementById("txtPreCadCadIdentificationNumber").value,PRE_REGISTER_REGISTER_NEW.personnationality=document.getElementById("selPreCadCadPersonNationality").value,PRE_REGISTER_REGISTER_NEW.personphone1=reviewString(document.getElementById("txtPreCadCadPersonTelef1").value),PRE_REGISTER_REGISTER_NEW.personphone2=reviewString(document.getElementById("txtPreCadCadPersonTelef2").value),2==PRE_REGISTER_PERSON_TYPE&&""==PRE_REGISTER_REGISTER_NEW.personphone1&&""==PRE_REGISTER_REGISTER_NEW.personphone2&&(t=!0,n+="Deve indicar pelo menos um contacto do responsável. <br>"),PRE_REGISTER_REGISTER_NEW.personemail=reviewEmail(document.getElementById("txtPreCadCadPersonEmail").value),2==PRE_REGISTER_PERSON_TYPE&&""!=PRE_REGISTER_REGISTER_NEW.personemail&&(validateEmail(PRE_REGISTER_REGISTER_NEW.personemail)||(t=!0,n+="O e-mail do responsável está incorreto. <br>")),PRE_REGISTER_REGISTER_NEW.academicdegree=document.getElementById("selPreCadCadAcademicDegree").value,PRE_REGISTER_REGISTER_NEW.schoolname=reviewString(document.getElementById("txtPreCadCadSchoolName").value),PRE_REGISTER_REGISTER_NEW.worktitle=reviewString(document.getElementById("txtPreCadCadWorkTitle").value),PRE_REGISTER_REGISTER_NEW.formationyear=document.getElementById("txtPreCadCadFormationYear").value;var s="{",o=0;if(PRE_REGISTER_REGISTER_PROFITIONAL_FORMATION.forEach(e=>(function(e){0!=e.status&&(0!=o&&(s+=","),s+='"'+o+'":'+JSON.stringify(e),o+=1)})(e)),s+="}",PRE_REGISTER_REGISTER_NEW.profitionalFormation=s,1==t)return alert(n),!1;showNotification(),PRE_REGISTER_REGISTER_NEW.laststage=2;i=new XMLHttpRequest,r="action=savePreRegisterRegister&registerInfo="+JSON.stringify(PRE_REGISTER_REGISTER_NEW)+"&sender=PERSON",a="_aqconections/preregister_crud.php";i.open("POST",a,!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=JSON.parse(i.responseText);return 0==e.status?(showNotification(e.msg,0),!1):(l(""),!0)}},i.send(r)}if(3==PRE_REGISTER_REGISTER_ACTUAL_STAGE){PRE_REGISTER_REGISTER_NEW.attachdocument1=document.getElementById("lbPreCadCadAttachTargetFileName1").innerHTML,PRE_REGISTER_REGISTER_NEW.attachdocument2=document.getElementById("lbPreCadCadAttachTargetFileName2").innerHTML,PRE_REGISTER_REGISTER_NEW.attachdocument3=document.getElementById("lbPreCadCadAttachTargetFileName3").innerHTML,PRE_REGISTER_REGISTER_NEW.attachdocument4=document.getElementById("lbPreCadCadAttachTargetFileName4").innerHTML,PRE_REGISTER_REGISTER_NEW.attachdocument5=document.getElementById("lbPreCadCadAttachTargetFileName5").innerHTML,PRE_REGISTER_REGISTER_NEW.attachdocument6=document.getElementById("lbPreCadCadAttachTargetFileName6").innerHTML;var d=!0;if(""==PRE_REGISTER_REGISTER_NEW.attachdocument1&&""==PRE_REGISTER_REGISTER_NEW.attachdocument2&&""==PRE_REGISTER_REGISTER_NEW.attachdocument3&&""==PRE_REGISTER_REGISTER_NEW.attachdocument4&&""==PRE_REGISTER_REGISTER_NEW.attachdocument5&&""==PRE_REGISTER_REGISTER_NEW.attachdocument6&&(d=!1),d){showNotification(),PRE_REGISTER_REGISTER_NEW.laststage=3;i=new XMLHttpRequest,r="action=savePreRegisterRegister&registerInfo="+JSON.stringify(PRE_REGISTER_REGISTER_NEW)+"&sender=ATTACH",a="_aqconections/preregister_crud.php";i.open("POST",a,!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=JSON.parse(i.responseText);return 0==e.status?(showNotification(e.msg,0),!1):(l(""),!0)}},i.send(r)}}if(4==PRE_REGISTER_REGISTER_ACTUAL_STAGE&&PRE_REGISTER_REGISTER_INVESTMENT_ASSIGNED.length>0){CUSTOMER_NEW=new _customer,CUSTOMER_NEW.companyid=PRE_REGISTER_REGISTER_NEW.companyId,CUSTOMER_NEW.registerid=PRE_REGISTER_REGISTER_NEW.registerId,CUSTOMER_NEW.customerid="Novo cliente",CUSTOMER_NEW.customertype=0,CUSTOMER_NEW.companyname=PRE_REGISTER_REGISTER_NEW.registerName,CUSTOMER_NEW.customertaxid=PRE_REGISTER_REGISTER_NEW.registerTaxId,CUSTOMER_NEW.selfbillingindicator=0,CUSTOMER_NEW.billingcountry=PRE_REGISTER_REGISTER_NEW.billingCountry,CUSTOMER_NEW.billingprovince=PRE_REGISTER_REGISTER_NEW.billingProvince,CUSTOMER_NEW.billingmunicipality=PRE_REGISTER_REGISTER_NEW.billingMunicipality,CUSTOMER_NEW.billingcity=PRE_REGISTER_REGISTER_NEW.billingCity,CUSTOMER_NEW.billingdistrict=PRE_REGISTER_REGISTER_NEW.billingDistrict,CUSTOMER_NEW.billingcomuna=PRE_REGISTER_REGISTER_NEW.billingComuna,CUSTOMER_NEW.billingneiborhood=PRE_REGISTER_REGISTER_NEW.billingNeiborhood,CUSTOMER_NEW.billingstreetname=PRE_REGISTER_REGISTER_NEW.billingStreetName,CUSTOMER_NEW.billingbuildingnumber=PRE_REGISTER_REGISTER_NEW.billingBuildNumber,CUSTOMER_NEW.billingpostalcode=PRE_REGISTER_REGISTER_NEW.billingPostalCode,CUSTOMER_NEW.shipcountry=1,CUSTOMER_NEW.shipprovince=-1,CUSTOMER_NEW.shipmunicipality=-1,CUSTOMER_NEW.shipcity="",CUSTOMER_NEW.shipdistrict="",CUSTOMER_NEW.shipcomuna="",CUSTOMER_NEW.shipneiborhood="",CUSTOMER_NEW.shipstreetname="",CUSTOMER_NEW.shipbuildingnumber="",CUSTOMER_NEW.shippostalcode="",CUSTOMER_NEW.telephone1=PRE_REGISTER_REGISTER_NEW.billingPhone1,CUSTOMER_NEW.telephone2=PRE_REGISTER_REGISTER_NEW.billingPhone2,CUSTOMER_NEW.telephone3="",CUSTOMER_NEW.email=PRE_REGISTER_REGISTER_NEW.billingEmail,CUSTOMER_NEW.website=PRE_REGISTER_REGISTER_NEW.billingWebsite,CUSTOMER_NEW.contactperson=PRE_REGISTER_REGISTER_NEW.personname,CUSTOMER_NEW.contactpersoncharge=PRE_REGISTER_REGISTER_NEW.personfunction,CUSTOMER_NEW.userId=PRE_REGISTER_REGISTER_NEW.entryuser,CUSTOMER_NEW.coordinatorUser=PRE_REGISTER_REGISTER_NEW.coordinatorUser,CUSTOMER_NEW.managerUser=PRE_REGISTER_REGISTER_NEW.managerUser,CUSTOMER_NEW.directorGeneralUser=PRE_REGISTER_REGISTER_NEW.directorGeneralUser,CUSTOMER_NEW.administratorUser=PRE_REGISTER_REGISTER_NEW.administratorUser,CUSTOMER_NEW.request=PRE_REGISTER_REGISTER_NEW.request,showNotification();i=new XMLHttpRequest,r="action=saveCustomerInfo&customerInfo="+JSON.stringify(CUSTOMER_NEW),a=URL_SA_CUSTOMER_X;i.open("POST",a,!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=this.responseText;invoiceSetNew(4,PRE_REGISTER_REGISTER_NEW.request,"PRECADCAD"),INVOICE_NEW.customerId=e;var t="0";PRE_REGISTER_REGISTER_INVESTMENT_ASSIGNED.forEach(e=>(function(e){t+=", "+e.productid})(e));var n=new XMLHttpRequest,i="action=getProductFullDescription&companyId="+PRE_REGISTER_REGISTER_NEW.companyId+"&productId="+t+"&isNote=0&isList=1",r=URL_SA_INVOICE_X;return n.open("POST",r,!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=JSON.parse(this.responseText),t=0;e.forEach(e=>(function(e){t+=1;let n=JSON.parse(e);invoiceAddSingleLine(n,"",9999,t,0,-1)})(e)),invoiceSaveDocument("PRECADCAD",1)}},n.send(i),!0}},i.send(r)}function l(e){(PRE_REGISTER_REGISTER_ACTUAL_STAGE+=1)>PRE_REGISTER_MAX_STAGE&&(PRE_REGISTER_REGISTER_ACTUAL_STAGE=PRE_REGISTER_MAX_STAGE),preRegisterRegisterSetVisibility(PRE_REGISTER_REGISTER_ACTUAL_STAGE),hideNotification()}PRE_REGISTER_REGISTER_ACTUAL_STAGE>2&&l("")}function preRegisterRegisterGoBackStage(e){(PRE_REGISTER_REGISTER_ACTUAL_STAGE-=1)<1&&(PRE_REGISTER_REGISTER_ACTUAL_STAGE=1),preRegisterRegisterSetVisibility(PRE_REGISTER_REGISTER_ACTUAL_STAGE)}function preRegisterGetServiceTitle(e){var t=document.getElementById("selPreCadCadBusiness").value,n=new XMLHttpRequest,i="action=preRegisterEditBusiness&businessId="+t;n.open("POST","_aqconections/preregister_crud.php",!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.onreadystatechange=function(){if(4==this.readyState&&200==this.status){JSON.parse(this.responseText).forEach(e=>void 0)}},n.send(i)}function preRegisterRegisterGetInfo(e,t){try{isNaN(e)&&(e=-1),isNaN(t)&&(t=-1);var n=document.getElementById("lbPreCadCadRegisterId"),i=document.getElementById("lbPreCadCadRegisterName"),r=document.getElementById("txtPreCadCadRegisterName"),a=document.getElementById("selPreCadCadRegisterDoc"),s=document.getElementById("txtPreCadCadRegisterIdentificationNumber"),o=document.getElementById("txtPreCadCadFatherName"),d=document.getElementById("txtPreCadCadMotherName"),l=document.getElementById("selPreCadCadRegisterNationality"),E=document.getElementById("txtPreCadCadRegisterTaxId"),R=document.getElementById("selPreCadCadBusiness"),c=document.getElementById("txtPreCadCadProfition"),u=document.getElementById("selPreCadCadBillCountry"),m=document.getElementById("selPreCadCadBillProvince"),S=document.getElementById("selPreCadCadBillMunicipality"),g=document.getElementById("txtPreCadCadBillCity"),I=document.getElementById("txtPreCadCadBillDistrict"),T=document.getElementById("txtPreCadCadBillComuna"),p=document.getElementById("txtPreCadCadBillNeiborhood"),_=document.getElementById("txtPreCadCadBillStreet"),C=document.getElementById("txtPreCadCadBillBuidNumber"),P=document.getElementById("txtPreCadCadBillPostal"),y=document.getElementById("txtPreCadCadTelef1"),v=document.getElementById("txtPreCadCadTelef2"),N=document.getElementById("txtPreCadCadTelef3"),h=document.getElementById("txtPreCadCadEmail"),f=document.getElementById("txtPreCadCadWebsite"),G=document.getElementById("numPreCadCadDependenceNumber"),b=document.getElementById("txtPreCadCadPersonName"),B=document.getElementById("txtPreCadCadPersonFunction"),w=document.getElementById("selPreCadCadIdentificationDoc"),M=document.getElementById("txtPreCadCadIdentificationNumber"),x=document.getElementById("selPreCadCadPersonNationality"),A=document.getElementById("txtPreCadCadPersonTelef1"),O=document.getElementById("txtPreCadCadPersonTelef2"),L=document.getElementById("txtPreCadCadPersonEmail"),W=document.getElementById("selPreCadCadAcademicDegree"),H=document.getElementById("txtPreCadCadSchoolName"),U=document.getElementById("txtPreCadCadWorkTitle"),q=document.getElementById("txtPreCadCadFormationYear"),D=document.getElementById("tblPreCadCadProfitionalMainTable"),F=document.getElementById("lbPreCadCadWorkingDocuments");if(Number(t)<=0){n.innerHTML="Novo cadastro",i.inputmode="",r.value="",a.value=-1,s.value="",o.value="",d.value="",l.value=-1,E.value="",R.value=-1,c.value="",u.value=1,m.value=-1,S.value=-1,g.value="",I.value="",T.value="",p.value="",_.value="",C.value="",P.value="",y.value="",v.value="",N.value="",h.value="",f.value="",G.value=0,b.value="",B.value="",w.value=-1,M.value="",x.value=-1,A.value="",O.value="",L.value="",W.value=-1,H.value="",U.value="",q.value=2021,D.innerHTML="";for(var Q=1;Q<=6;Q++)document.getElementById("lbPreCadCadAttachSourceFileName"+Q).innerHTML="|...",document.getElementById("lbPreCadCadAttachTargetFileName"+Q).innerHTML="";F.value="..."}else{var k=new XMLHttpRequest,J="action=getPreRegisterRegisterList&companyId="+e+"&registerId="+t;k.open("POST","_aqconections/preregister_crud.php",!0),k.setRequestHeader("Content-type","application/x-www-form-urlencoded"),k.onreadystatechange=function(){if(4==k.readyState&&200==k.status){alert(k.responseText),JSON.parse(this.responseText).forEach(e=>(function(e){var t=JSON.parse(e);n.innerHTML=t.id,i.innerHTML="  Em nome de: "+t.registername.toString().bold(),r.value=t.registername,a.value=t.registerdoc,s.value=t.registerdocnumber,o.value=t.fathername,d.value=t.mothername,l.value=t.registernationality,E.value=t.registertaxid,R.value=t.businessid,c.value=t.profission,u.value=t.billingcountry,m.value=t.billingprovince,fillSelectMunicipality("selPreCadCadBillMunicipality",t.billingprovince,-1,t.billingmunicipality),S.value=t.billingmunicipality,g.value=t.billingcity,I.value=t.billingdistrict,T.value=t.billingcomuna,p.value=t.billingneiborhood,_.value=t.billingstreetname,C.value=t.billingbuildingnumber,P.value=t.billingpostalcode,y.value=t.billingtelephone1,v.value=t.billingtelephone2,N.value=t.billingtelephone3,h.value=t.billingemail,f.value=t.billingwebsite,G.value=t.dependence,b.value=t.personname,B.value=t.personfunction,w.value=t.identificationdoc,M.value=t.identificationnumber,x.value=t.personnationality,A.value=t.personphone1,O.value=t.personphone2,L.value=t.personemail,W.value=t.academicdegree,H.value=t.schoolname,U.value=t.worktitle,q.value=t.formationyear;for(var D=1;D<=6;D++)document.getElementById("lbPreCadCadAttachSourceFileName"+D).innerHTML="| "+t["attachdocument"+D],document.getElementById("lbPreCadCadAttachTargetFileName"+D).innerHTML="";F.value=t[""]})(e))}},k.send(J)}r.focus()}catch(e){alert(e.message)}}function preRegisterRegisterSetService(e){isNaN(e)&&(e=-1);var t=document.getElementById("selPreCadCadBusiness").value;PRE_REGISTER_REGISTER_SERVICES=[];var n=new XMLHttpRequest,i="action=getPreRegisterRegisterAsignedService&businessId="+t+"&registerId="+e;n.open("POST","_aqconections/preregister_crud.php",!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=JSON.parse(this.responseText);let n=document.getElementById("tblPreCadCadServiceTable");n.innerHTML="";var t=0;e.forEach(e=>(function(e){t+=1;let i=JSON.parse(e),r=n.insertRow(-1);r.setAttribute("class","borderGray");let a=r.insertCell(0);a.setAttribute("class","colRowNumber"),a.innerHTML=t;let s=r.insertCell(1);s.style.paddingRight="10px",s.innerHTML=i.service;let o=r.insertCell(2);var d=document.createElement("select");d.id="selPreCadCadServiceStatus"+t,d.name=t;var l=document.createElement("option");l.value="0",l.innerHTML="Não",d.appendChild(l);var E=document.createElement("option");E.value="1",E.innerHTML="Sim",d.appendChild(E),d.value=i.status,d.title=i.status,d.onchange=function(){preRegisterRegisterServiceChange(d.name)},d.style.width="60px",o.appendChild(d),o.style.textAlign="center",o.style.width="60px",PRE_REGISTER_REGISTER_SERVICES[Number(d.name)-1]=i})(e))}},n.send(i)}function preRegisterRegisterServiceChange(e){var t=document.getElementById("selPreCadCadServiceStatus"+e);t.title=t.value,PRE_REGISTER_REGISTER_SERVICES[Number(e)-1].status=t.value}function preRegisterRegisterSetQuestion(e){isNaN(e)&&(e=-1);var t=document.getElementById("selPreCadCadBusiness").value;PRE_REGISTER_REGISTER_QUESTIONS=[];var n=new XMLHttpRequest,i="action=getPreRegisterRegisterAsignedQuestion&businessId="+t+"&registerId="+e;n.open("POST","_aqconections/preregister_crud.php",!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=JSON.parse(this.responseText);let n=document.getElementById("tblPreCadCadQuestionTable");n.innerHTML="";var t=0;e.forEach(e=>(function(e){t+=1;let i=JSON.parse(e),r=n.insertRow(-1);r.setAttribute("class","borderGray");let a=r.insertCell(0);a.setAttribute("class","colRowNumber"),a.innerHTML=t;let s=r.insertCell(1);s.style.paddingRight="10px",s.innerHTML=i.question;let o=r.insertCell(2);var d=document.createElement("select");d.id="selPreCadCadQuestionStatus"+t,d.name=t;var l=document.createElement("option");l.value="0",l.innerHTML="Não",d.appendChild(l);var E=document.createElement("option");E.value="1",E.innerHTML="Sim",d.appendChild(E),d.value=i.status,d.title=i.status,d.onchange=function(){preRegisterRegisterQuestionChange(d.name)},d.style.width="60px",o.appendChild(d),o.style.textAlign="center",o.style.width="60px",PRE_REGISTER_REGISTER_QUESTIONS[Number(d.name)-1]=i})(e))}},n.send(i)}function preRegisterRegisterQuestionChange(e){var t=document.getElementById("selPreCadCadQuestionStatus"+e);t.title=t.value,PRE_REGISTER_REGISTER_QUESTIONS[Number(e)-1].status=t.value}function preRegisterRegisterSetInvestment(e,t=-1){isNaN(t)&&(t=-1);var n=document.getElementById("selPreCadCadBusiness").value;PRE_REGISTER_REGISTER_INVESTMENT=[],preRegisterRegisterInvestmentRnew("");var i=new XMLHttpRequest,r="action=getPreRegisterRegisterInvestment&businessId="+n+"&companyId="+e;i.open("POST","_aqconections/preregister_crud.php",!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=JSON.parse(this.responseText);let n=document.getElementById("tblPreCadCadInvestmentTable");n.innerHTML="";var t=0;e.forEach(e=>(function(e){const i=t+=1;let r=JSON.parse(e),a=n.insertRow(-1);a.setAttribute("class","borderGray");let s=a.insertCell(0);s.setAttribute("class","colRowNumber"),s.innerHTML=t;let o=a.insertCell(1);o.style.paddingRight="10px",o.innerHTML=r.productdescription;let d=a.insertCell(2);d.style.paddingRight="10px",d.style.textAlign="right",d.innerHTML=formatNumber(r.PVP).bold();let l=a.insertCell(3),E=document.createElement("button");E.setAttribute("class","labelAdd"),E.type="button",E.onclick=function(){preRegisterRegisterInvestmentAddToCar(i)},l.appendChild(E),l.style.textAlign="center",l.style.width="60px",PRE_REGISTER_REGISTER_INVESTMENT[Number(i)-1]=r})(e))}},i.send(r)}function preRegisterRegisterInvestmentAddToCar(e){var t=PRE_REGISTER_REGISTER_INVESTMENT_ASSIGNED.length;const n=PRE_REGISTER_REGISTER_INVESTMENT[Number(e)-1];if(preRegisterRegisterInvestmentCheckInCar(n.productid))return showNotification("Já adicionado",0),!1;n.status=1,PRE_REGISTER_REGISTER_INVESTMENT_ASSIGNED[Number(t)]=n,preRegisterRegisterInvestmentTotal(""),t+=1;let i=document.getElementById("tblPreCadCadInvestmentCarTable").insertRow(-1);i.setAttribute("class","borderGray"),i.setAttribute("id","rowPreCadCadInvestmentAssigned"+t);let r=i.insertCell(0);r.setAttribute("class","colRowNumber"),r.innerHTML=t;let a=i.insertCell(1);a.style.paddingRight="10px",a.innerHTML=n.productdescription;let s=i.insertCell(2);s.style.paddingRight="10px",s.style.textAlign="right",s.innerHTML=formatNumber(n.PVP).bold()}function preRegisterRegisterInvestmentCheckInCar(e){var t=!1;return PRE_REGISTER_REGISTER_INVESTMENT_ASSIGNED.forEach(n=>(function(n){n.productid==e&&1==n.status&&(t=!0)})(n)),t}function preRegisterRegisterInvestmentTotal(e){var t=0;PRE_REGISTER_REGISTER_INVESTMENT_ASSIGNED.forEach(e=>(function(e){1==e.status&&(t+=Number(e.PVP))})(e)),document.getElementById("lbPreCadCadTotalInvestment").innerHTML=formatNumber(t)}function preRegisterRegisterInvestmentRnew(e){PRE_REGISTER_REGISTER_INVESTMENT_ASSIGNED=[],document.getElementById("tblPreCadCadInvestmentCarTable").innerHTML="",preRegisterRegisterInvestmentTotal("")}function preRegisterRegisterPersonTypeChange(e){const t=document.getElementById("h2PreCadCadTitle"),n=document.getElementById("h3PreCadCadAboutCompany"),i=document.getElementById("legPreCadCadRegisterInfo"),r=document.getElementById("lbPreCadCadRegisterName1"),a=document.getElementById("divPreCadCadRegisterDoc"),s=document.getElementById("divPreCadCadRegisterIdentificationNumber"),o=document.getElementById("divPreCadCadFatherName"),d=document.getElementById("divPreCadCadMotherName"),l=document.getElementById("divPreCadCadRegisterNationality"),E=document.getElementById("divPreCadCadProfition"),R=document.getElementById("divPreCadCadDependencyNumber");var c="<span class='required'></span>";const u=document.getElementById("h3PreCadCadStage2"),m=document.getElementById("fldsPreCadCadPerson"),S=document.getElementById("fldsPreCadCadAcademic"),g=document.getElementById("fldsPreCadCadProfitional"),I=document.getElementById("lbPreCadCadAttachDocName1");1==PRE_REGISTER_PERSON_TYPE?(t.innerHTML="Pré-cadastro de pessoa singular / pessoa física",n.innerHTML="1. SOBRE A PESSOA",i.innerHTML="Dados pessoais".bold(),r.innerHTML=c+"Nome completo:",a.style.display="block",s.style.display="block",o.style.display="block",d.style.display="block",l.style.display="block",E.style.display="block",R.style.display="none",u.innerHTML="2. Dados académicos e profissionais",m.style.display="none",S.style.display="flex",S.style.flexWrap="wrap",g.style.display="flex",g.style.flexWrap="wrap",I.innerHTML="1- Documento de identificação".bold()):(t.innerHTML="Pré-cadastro de pessoa colectiva",n.innerHTML="1. SOBRE A INSTITUIÇÃO",i.innerHTML="Denominação".bold(),r.innerHTML=c+"Designação oficial:",a.style.display="none",s.style.display="none",o.style.display="none",d.style.display="none",l.style.display="none",E.style.display="none",R.style.display="block",u.innerHTML="2. Sobre o responsável da instituição",m.style.display="flex",m.style.flexWrap="wrap",S.style.display="none",g.style.display="none",I.innerHTML="1- Documento válido da instituição".bold());for(var T=3;T<=6;T++){let e=document.getElementById("divAttachFile"+T);e.style.display=1==PRE_REGISTER_PERSON_TYPE?"block":"none"}}function preRegisterRegisterSetProfitionalFormation(e){PRE_REGISTER_REGISTER_PROFITIONAL_FORMATION=[]}function preRegisterRegisterAddFormation(e){let t=document.getElementById("tblPreCadCadProfitionalMainTable");var n=Number(t.rows.length)+1;PRE_REGISTER_REGISTER_PROFITIONAL_FORMATION[Number(n)-1]={id:0,formationtype:"",qualification:"",schoolname:"",formationyear:2021,country:1,status:1};const i=n;let r=t.insertRow(-1);r.id="rwPreCadCadProfitional"+n,r.setAttribute("class","borderGray");let a=r.insertCell(0);a.setAttribute("class","colRowNumber"),a.innerHTML=n;let s=r.insertCell(1),o=document.createElement("input");o.type="text",o.id="txtPreCadCadProfitionalType"+n,o.onchange=function(){preRegisterRegisterProfitionalChange(i)},s.appendChild(o);let d=r.insertCell(2),l=document.createElement("input");l.type="text",l.id="txtPreCadCadProfitionalQualification"+n,l.onchange=function(){preRegisterRegisterProfitionalChange(i)},d.appendChild(l);let E=r.insertCell(3),R=document.createElement("input");R.type="text",R.id="txtPreCadCadProfitionalSchool"+n,R.onchange=function(){preRegisterRegisterProfitionalChange(i)},E.appendChild(R);let c=r.insertCell(4),u=document.createElement("input");u.type="number",u.id="numPreCadCadProfitionalYear"+n,u.min="1900",u.value=2021,u.onchange=function(){preRegisterRegisterProfitionalChange(i)},c.appendChild(u),c.style.textAlign="center";let m=r.insertCell(5),S=document.createElement("select");S.id="selPreCadCadProfitionalCountry"+n,S.onchange=function(){preRegisterRegisterProfitionalChange(i)},m.appendChild(S);let g=r.insertCell(6),I=document.createElement("input");I.type="button",I.value=LABEL_REMOVE,I.onclick=function(){preRegisterRegisterProfitionalRemove(i)},g.appendChild(I),g.style.textAlign="center",fillSelectCountry(S.id)}function preRegisterRegisterProfitionalChange(e){var t=reviewString(document.getElementById("txtPreCadCadProfitionalType"+e)),n=reviewString(document.getElementById("txtPreCadCadProfitionalQualification"+e).value),i=reviewString(document.getElementById("txtPreCadCadProfitionalSchool"+e).value),r=document.getElementById("numPreCadCadProfitionalYear"+e).value,a=document.getElementById("selPreCadCadProfitionalCountry"+e).value;PRE_REGISTER_REGISTER_PROFITIONAL_FORMATION[Number(e)-1].formationtype=t,PRE_REGISTER_REGISTER_PROFITIONAL_FORMATION[Number(e)-1].qualification=n,PRE_REGISTER_REGISTER_PROFITIONAL_FORMATION[Number(e)-1].schoolname=i,PRE_REGISTER_REGISTER_PROFITIONAL_FORMATION[Number(e)-1].formationyear=r,PRE_REGISTER_REGISTER_PROFITIONAL_FORMATION[Number(e)-1].country=a}function preRegisterRegisterProfitionalRemove(e){document.getElementById("rwPreCadCadProfitional"+e).innerHTML="",PRE_REGISTER_REGISTER_PROFITIONAL_FORMATION[Number(e)-1].status=0}function preRegisterRegisterFinish(e,t){const n=document.getElementById("divPreCadCadLastMsg"),i=document.getElementById("h3PreCadCadThanks"),r=document.getElementById("lbPreCadCadLastMsg"),a=document.getElementById("btPreCadCadLastMsg1"),s=document.getElementById("btPreCadCadLastMsg2");e?(i.innerHTML="Que pena.",r.innerHTML="O que deseja fazer?"):(i.innerHTML="Muito obrigado.",r.innerHTML="O Sílica Aqua agradece pelo seu cadastro."),a.value="Novo cadastro",s.value="Sair da página",a.onclick=function(){window.location.reload()},s.onclick=-1==t?function(){window.location.href="indexRequest.php"}:function(){window.location.href="home.php"},n.style.display="block"}